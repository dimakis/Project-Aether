# =============================================================================
# Project Aether Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control

# -----------------------------------------------------------------------------
# Home Assistant (Optional - can be configured via UI setup wizard)
# -----------------------------------------------------------------------------
# These are optional if you use the first-time setup wizard in the UI.
# The wizard stores HA URL and token in the database (encrypted).
# Env vars serve as fallback / recovery.
HA_TOKEN=your_long_lived_access_token_here
HA_URL=http://homeassistant.local:8123

# -----------------------------------------------------------------------------
# OpenAI (Required for agents)
# -----------------------------------------------------------------------------
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4-turbo

# -----------------------------------------------------------------------------
# Database (Required)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql+asyncpg://aether:aether@localhost:5432/aether
DATABASE_URL_SYNC=postgresql://aether:aether@localhost:5432/aether

# -----------------------------------------------------------------------------
# MLflow (Constitution: Principle III - Observability)
# -----------------------------------------------------------------------------
MLFLOW_TRACKING_URI=http://localhost:5002
MLFLOW_EXPERIMENT_NAME=aether

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
ENVIRONMENT=development
API_HOST=0.0.0.0
API_PORT=8000

# API Authentication (empty = disabled)
API_KEY=

# -----------------------------------------------------------------------------
# Session Authentication (JWT + Passkey)
# -----------------------------------------------------------------------------
# Username for login (default: admin)
AUTH_USERNAME=admin
# Password for login (optional - can be set during setup wizard instead)
# The setup wizard stores a bcrypt hash in the DB. This env var is a fallback.
AUTH_PASSWORD=
# JWT signing secret (auto-generated if empty, set for multi-worker stability)
# Also used to derive the Fernet key for encrypting the HA token in the DB.
JWT_SECRET=
# JWT token lifetime in hours (default: 72)
JWT_EXPIRY_HOURS=72

# WebAuthn / Passkey (for Face ID / Touch ID login)
# Set these to match your domain when using remote access
WEBAUTHN_RP_ID=localhost
WEBAUTHN_RP_NAME=Aether
WEBAUTHN_ORIGIN=http://localhost:3000

# CORS (comma-separated origins, empty = auto based on ENVIRONMENT)
ALLOWED_ORIGINS=

# -----------------------------------------------------------------------------
# Sandbox Settings (Constitution: Principle II - Isolation)
# -----------------------------------------------------------------------------
SANDBOX_RUNTIME=runsc
SANDBOX_TIMEOUT=300
SANDBOX_MEMORY_LIMIT=512m

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
DEBUG=false
ENABLE_TRACING=true
ENABLE_ENTITY_SYNC=true
